{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 111, "column": 0}, "map": {"version":3,"sources":["file://P%3A/decentralized_ai_realestate/frontend/dapp-ai-realestate/lib/web3/utils.ts"],"sourcesContent":["import Web3 from 'web3';\r\n\r\ndeclare global {\r\n  interface Window {\r\n    ethereum?: any;\r\n    web3?: any;\r\n  }\r\n}\r\n\r\nexport const getWeb3Instance = async () => {\r\n  if (typeof window !== 'undefined') {\r\n    // Modern dapp browsers\r\n    if (window.ethereum) {\r\n      try {\r\n        await window.ethereum.request({ method: 'eth_requestAccounts' });\r\n        return new Web3(window.ethereum);\r\n      } catch (error) {\r\n        console.error('User denied account access', error);\r\n        throw error;\r\n      }\r\n    }\r\n    // Legacy dapp browsers\r\n    else if (window.web3) {\r\n      return new Web3(window.web3.currentProvider);\r\n    }\r\n  }\r\n  // Non-dapp browsers or no wallet installed\r\n  console.log('Non-Ethereum browser detected. Consider installing MetaMask!');\r\n  return null;\r\n};\r\n\r\nexport const getConnectedAccounts = async (web3: Web3) => {\r\n  return await web3.eth.getAccounts();\r\n};\r\n\r\n\r\nexport const shortenAddress = (address: string, chars = 4) => {\r\n    return `${address.substring(0, chars + 2)}...${address.substring(\r\n      address.length - chars\r\n    )}`;\r\n  };\r\n  \r\n  export const switchNetwork = async (web3: Web3, chainId: number) => {\r\n    if (!window.ethereum) throw new Error('MetaMask not installed');\r\n    \r\n    try {\r\n      await window.ethereum.request({\r\n        method: 'wallet_switchEthereumChain',\r\n        params: [{ chainId: web3.utils.toHex(chainId) }],\r\n      });\r\n    } catch (error: any) {\r\n      // This error code indicates that the chain has not been added to MetaMask\r\n      if (error.code === 4902) {\r\n        throw new Error('Network not added to MetaMask');\r\n      }\r\n      throw error;\r\n    }\r\n  };"],"names":[],"mappings":";;;;;;AAAA;;AASO,MAAM,kBAAkB;IAC7B,uCAAmC;;IAenC;IACA,2CAA2C;IAC3C,QAAQ,GAAG,CAAC;IACZ,OAAO;AACT;AAEO,MAAM,uBAAuB,OAAO;IACzC,OAAO,MAAM,KAAK,GAAG,CAAC,WAAW;AACnC;AAGO,MAAM,iBAAiB,CAAC,SAAiB,QAAQ,CAAC;IACrD,OAAO,GAAG,QAAQ,SAAS,CAAC,GAAG,QAAQ,GAAG,GAAG,EAAE,QAAQ,SAAS,CAC9D,QAAQ,MAAM,GAAG,QAChB;AACL;AAEO,MAAM,gBAAgB,OAAO,MAAY;IAC9C,IAAI,CAAC,OAAO,QAAQ,EAAE,MAAM,IAAI,MAAM;IAEtC,IAAI;QACF,MAAM,OAAO,QAAQ,CAAC,OAAO,CAAC;YAC5B,QAAQ;YACR,QAAQ;gBAAC;oBAAE,SAAS,KAAK,KAAK,CAAC,KAAK,CAAC;gBAAS;aAAE;QAClD;IACF,EAAE,OAAO,OAAY;QACnB,0EAA0E;QAC1E,IAAI,MAAM,IAAI,KAAK,MAAM;YACvB,MAAM,IAAI,MAAM;QAClB;QACA,MAAM;IACR;AACF","debugId":null}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file://P%3A/decentralized_ai_realestate/frontend/dapp-ai-realestate/lib/web3/auth.ts"],"sourcesContent":["import Web3 from 'web3';\r\nimport { getWeb3Instance, getConnectedAccounts } from './utils';\r\n\r\nexport const connectWallet = async () => {\r\n  const web3 = await getWeb3Instance();\r\n  if (!web3) throw new Error('Web3 not initialized');\r\n  \r\n  const accounts = await getConnectedAccounts(web3);\r\n  if (accounts.length === 0) throw new Error('No accounts found');\r\n  \r\n  return {\r\n    web3,\r\n    account: accounts[0],\r\n    chainId: await web3.eth.getChainId()\r\n  };\r\n};\r\n\r\nexport const signMessage = async (web3: Web3, account: string, message: string) => {\r\n  return await web3.eth.personal.sign(message, account, '');\r\n};\r\n\r\nexport const verifySignature = async (web3: Web3, message: string, signature: string, address: string) => {\r\n  const recoveredAddress = await web3.eth.personal.ecRecover(message, signature);\r\n  return recoveredAddress.toLowerCase() === address.toLowerCase();\r\n};"],"names":[],"mappings":";;;;;AACA;;AAEO,MAAM,gBAAgB;IAC3B,MAAM,OAAO,MAAM,CAAA,GAAA,oHAAA,CAAA,kBAAe,AAAD;IACjC,IAAI,CAAC,MAAM,MAAM,IAAI,MAAM;IAE3B,MAAM,WAAW,MAAM,CAAA,GAAA,oHAAA,CAAA,uBAAoB,AAAD,EAAE;IAC5C,IAAI,SAAS,MAAM,KAAK,GAAG,MAAM,IAAI,MAAM;IAE3C,OAAO;QACL;QACA,SAAS,QAAQ,CAAC,EAAE;QACpB,SAAS,MAAM,KAAK,GAAG,CAAC,UAAU;IACpC;AACF;AAEO,MAAM,cAAc,OAAO,MAAY,SAAiB;IAC7D,OAAO,MAAM,KAAK,GAAG,CAAC,QAAQ,CAAC,IAAI,CAAC,SAAS,SAAS;AACxD;AAEO,MAAM,kBAAkB,OAAO,MAAY,SAAiB,WAAmB;IACpF,MAAM,mBAAmB,MAAM,KAAK,GAAG,CAAC,QAAQ,CAAC,SAAS,CAAC,SAAS;IACpE,OAAO,iBAAiB,WAAW,OAAO,QAAQ,WAAW;AAC/D","debugId":null}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file://P%3A/decentralized_ai_realestate/frontend/dapp-ai-realestate/utils/env.ts"],"sourcesContent":["\r\nlet getEnvVariables = () => {\r\n    if (process.env.NEXT_PUBLIC_ENV === 'production') {\r\n        return {\r\n        apiUrl: 'https://api.example.com', // Replace with your production API URL\r\n        }\r\n    } else if (process.env.NEXT_PUBLIC_ENV === 'staging') {\r\n        return {\r\n        apiUrl: 'https://staging-api.example.com', // Replace with your staging API URL\r\n        }\r\n    } else {\r\n        return {\r\n        apiUrl: 'http://localhost:8000', // Replace with your local development API URL\r\n        }\r\n    }  \r\n}\r\n\r\nexport const { apiUrl } = getEnvVariables()"],"names":[],"mappings":";;;AACA,IAAI,kBAAkB;IAClB,IAAI,QAAQ,GAAG,CAAC,eAAe,KAAK,cAAc;QAC9C,OAAO;YACP,QAAQ;QACR;IACJ,OAAO,IAAI,QAAQ,GAAG,CAAC,eAAe,KAAK,WAAW;QAClD,OAAO;YACP,QAAQ;QACR;IACJ,OAAO;QACH,OAAO;YACP,QAAQ;QACR;IACJ;AACJ;AAEO,MAAM,EAAE,MAAM,EAAE,GAAG","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file://P%3A/decentralized_ai_realestate/frontend/dapp-ai-realestate/providers/Web3AuthProvider.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { createContext, useContext, useState, useEffect, ReactNode } from 'react';\r\nimport Web3 from 'web3';\r\nimport { connectWallet, signMessage, verifySignature } from '@/lib/web3/auth';\r\nimport { apiUrl } from '@/utils/env';\r\n\r\ninterface Web3AuthContextType {\r\n  web3: Web3 | null;\r\n  account: string | null;\r\n  chainId: bigint | null;\r\n  connect: () => Promise<void>;\r\n  disconnect: () => void;\r\n  isAuthenticated: boolean;\r\n  authToken: string | null;\r\n}\r\n\r\nconst Web3AuthContext = createContext<Web3AuthContextType | undefined>(undefined);\r\n\r\nexport const Web3AuthProvider = ({ children }: { children: ReactNode }) => {\r\n  const [web3, setWeb3] = useState<Web3 | null>(null);\r\n  const [account, setAccount] = useState<string | null>(null);\r\n  const [chainId, setChainId] = useState<bigint | null>(null);\r\n  const [authToken, setAuthToken] = useState<string | null>(null);\r\n\r\n  const connect = async () => {\r\n    console.log(\"apiUrl triggered\", apiUrl)\r\n    try {\r\n      const { web3, account, chainId } = await connectWallet();\r\n      setWeb3(web3);\r\n      setAccount(account);\r\n      setChainId(chainId);\r\n\r\n      // Generate a signature for backend verification\r\n      // Step 1: Request a nonce from the backend\r\n      console.log(\"account\", account)\r\n      console.log(\"apiUrl\", apiUrl)\r\n      console.log(\"web3\", web3)\r\n      const nonceResponse = await fetch(`${apiUrl}/core/api/auth/nonce`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ address: account }),\r\n      });\r\n\r\n      if (!nonceResponse.ok) {\r\n        throw new Error('Failed to fetch nonce');\r\n      }\r\n\r\n      const { nonce } = await nonceResponse.json();\r\n\r\n      const message = `Sign this message to verify your wallet: ${nonce}`;\r\n      const signature = await signMessage(web3, account, nonce);\r\n\r\n      /* // In a real app, you would send this to your backend for verification\r\n      const isValid = await verifySignature(web3, message, signature, account);\r\n      if (isValid) {\r\n        setAuthToken(signature); // In production, use a proper JWT from your backend\r\n      } */\r\n     // Step 3: Verify the signature with the backend\r\n      const verifyResponse = await fetch(`${apiUrl}/core/api/auth/verify`, {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        body: JSON.stringify({ \r\n          address: account, \r\n          signature: signature, \r\n          message: nonce\r\n        }),\r\n      });\r\n\r\n      console.log(\"Message\", message);\r\n      console.log(\"Signature\", signature);\r\n      console.log(\"Account\", account);\r\n      if (!verifyResponse.ok) {\r\n        throw new Error('Signature verification failed');\r\n      }\r\n\r\n      const { success, token } = await verifyResponse.json();\r\n\r\n      if (success) {\r\n        setAuthToken(token); // Use the token provided by the backend\r\n      }\r\n\r\n\r\n      // Listen for account changes\r\n      if (window.ethereum) {\r\n        window.ethereum.on('accountsChanged', (accounts: string[]) => {\r\n          if (accounts.length > 0) {\r\n            setAccount(accounts[0]);\r\n          } else {\r\n            disconnect();\r\n          }\r\n        });\r\n\r\n        window.ethereum.on('chainChanged', () => {\r\n          window.location.reload();\r\n        });\r\n      }\r\n    } catch (error) {\r\n      console.error('Error connecting wallet:', error);\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const disconnect = () => {\r\n    setWeb3(null);\r\n    setAccount(null);\r\n    setChainId(null);\r\n    setAuthToken(null);\r\n  };\r\n\r\n  useEffect(() => {\r\n    // Check if wallet is already connected when component mounts\r\n    const checkConnectedWallet = async () => {\r\n      if (window.ethereum && window.ethereum.selectedAddress) {\r\n        try {\r\n          await connect();\r\n        } catch (error) {\r\n          console.error('Error reconnecting wallet:', error);\r\n        }\r\n      }\r\n    };\r\n\r\n    checkConnectedWallet();\r\n\r\n    return () => {\r\n      if (window.ethereum) {\r\n        window.ethereum.removeAllListeners();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <Web3AuthContext.Provider\r\n      value={{\r\n        web3,\r\n        account,\r\n        chainId,\r\n        connect,\r\n        disconnect,\r\n        isAuthenticated: !!authToken,\r\n        authToken,\r\n      }}\r\n    >\r\n      {children}\r\n    </Web3AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useWeb3Auth = () => {\r\n  const context = useContext(Web3AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error('useWeb3Auth must be used within a Web3AuthProvider');\r\n  }\r\n  return context;\r\n};"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 357, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_59dee874.module.css [app-ssr] (css module)"],"sourcesContent":["__turbopack_context__.v({\n  \"className\": \"inter_59dee874-module__9CtR0q__className\",\n});\n"],"names":[],"mappings":"AAAA;AACA;AACA","ignoreList":[0]}},
    {"offset": {"line": 366, "column": 0}, "map": {"version":3,"sources":["turbopack:///[next]/internal/font/google/inter_59dee874.js"],"sourcesContent":["import cssModule from \"@vercel/turbopack-next/internal/font/google/cssmodule.module.css?{%22path%22:%22layout.tsx%22,%22import%22:%22Inter%22,%22arguments%22:[{%22subsets%22:[%22latin%22]}],%22variableName%22:%22inter%22}\";\nconst fontData = {\n    className: cssModule.className,\n    style: {\n        fontFamily: \"'Inter', 'Inter Fallback'\",\n        fontStyle: \"normal\",\n\n    },\n};\n\nif (cssModule.variable != null) {\n    fontData.variable = cssModule.variable;\n}\n\nexport default fontData;\n"],"names":[],"mappings":";;;AAAA;;AACA,MAAM,WAAW;IACb,WAAW,qJAAA,CAAA,UAAS,CAAC,SAAS;IAC9B,OAAO;QACH,YAAY;QACZ,WAAW;IAEf;AACJ;AAEA,IAAI,qJAAA,CAAA,UAAS,CAAC,QAAQ,IAAI,MAAM;IAC5B,SAAS,QAAQ,GAAG,qJAAA,CAAA,UAAS,CAAC,QAAQ;AAC1C;uCAEe","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 412, "column": 0}, "map": {"version":3,"sources":["file://P%3A/decentralized_ai_realestate/frontend/dapp-ai-realestate/app/layout.tsx"],"sourcesContent":["\"use client\";\n\n/* import type { Metadata } from \"next\";\nimport { Geist, Geist_Mono } from \"next/font/google\";\nimport \"./globals.css\";\n\nconst geistSans = Geist({\n  variable: \"--font-geist-sans\",\n  subsets: [\"latin\"],\n});\n\nconst geistMono = Geist_Mono({\n  variable: \"--font-geist-mono\",\n  subsets: [\"latin\"],\n});\n\nexport const metadata: Metadata = {\n  title: \"Create Next App\",\n  description: \"Generated by create next app\",\n};\n\nexport default function RootLayout({\n  children,\n}: Readonly<{\n  children: React.ReactNode;\n}>) {\n  return (\n    <html lang=\"en\">\n      <body\n        className={`${geistSans.variable} ${geistMono.variable} antialiased`}\n      >\n        {children}\n      </body>\n    </html>\n  );\n}\n */\n\n\n\nimport { Web3AuthProvider } from '@/providers/Web3AuthProvider';\nimport type { Metadata } from 'next';\nimport { Inter } from 'next/font/google';\nimport { usePathname } from 'next/navigation';\nimport { GoogleOAuthProvider } from '@react-oauth/google';\nimport './globals.css';\n\nconst inter = Inter({ subsets: ['latin'] });\n/* \nexport const metadata: Metadata = {\n  title: 'Homes & Props',\n  description: 'Your app description',\n};\n */\nexport default function RootLayout({\n  children,\n}: {\n  children: React.ReactNode;\n}) {\n  const pathname = usePathname();\n  const needsWallet = pathname.startsWith('/wallet') || pathname.startsWith('/buy');\n  console.log('needsWallet:', needsWallet);\n  console.log('google client id', process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID!)\n\n  return (\n    <html lang=\"en\">\n      <body className={inter.className}>\n        <GoogleOAuthProvider clientId={process.env.NEXT_PUBLIC_GOOGLE_CLIENT_ID!}>\n          {needsWallet ? (\n            <Web3AuthProvider>{children}</Web3AuthProvider>\n          ) : (\n            children\n          )}\n        </GoogleOAuthProvider>\n      </body>\n    </html>\n  );\n}"],"names":[],"mappings":";;;;AAEA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;CAkCC,GAID;;AAGA;AACA;AA5CA;;;;;;;AAsDe,SAAS,WAAW,EACjC,QAAQ,EAGT;IACC,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,cAAc,SAAS,UAAU,CAAC,cAAc,SAAS,UAAU,CAAC;IAC1E,QAAQ,GAAG,CAAC,gBAAgB;IAC5B,QAAQ,GAAG,CAAC;IAEZ,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;YAAK,WAAW,yIAAA,CAAA,UAAK,CAAC,SAAS;sBAC9B,cAAA,8OAAC,kKAAA,CAAA,sBAAmB;gBAAC,QAAQ;0BAC1B,4BACC,8OAAC,8HAAA,CAAA,mBAAgB;8BAAE;;;;;2BAEnB;;;;;;;;;;;;;;;;AAMZ","debugId":null}}]
}